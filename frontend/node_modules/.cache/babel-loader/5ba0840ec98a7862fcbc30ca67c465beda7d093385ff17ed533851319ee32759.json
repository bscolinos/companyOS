{"ast":null,"code":"import { create } from 'zustand';\nimport { cartService } from '../services/cartService';\nimport toast from 'react-hot-toast';\nexport const useCartStore = create((set, get) => ({\n  items: [],\n  isLoading: false,\n  totalItems: 0,\n  totalAmount: 0,\n  fetchCart: async () => {\n    set({\n      isLoading: true\n    });\n    try {\n      const items = await cartService.getCart();\n      const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);\n      const totalAmount = items.reduce((sum, item) => sum + item.total_price, 0);\n      set({\n        items,\n        totalItems,\n        totalAmount,\n        isLoading: false\n      });\n    } catch (error) {\n      set({\n        isLoading: false\n      });\n      console.error('Failed to fetch cart:', error);\n    }\n  },\n  addToCart: async (productId, quantity) => {\n    try {\n      await cartService.addToCart(productId, quantity);\n      await get().fetchCart(); // Refresh cart\n      toast.success('Added to cart!');\n    } catch (error) {\n      toast.error(error.message || 'Failed to add to cart');\n    }\n  },\n  updateQuantity: async (itemId, quantity) => {\n    try {\n      if (quantity <= 0) {\n        await get().removeItem(itemId);\n        return;\n      }\n      await cartService.updateCartItem(itemId, quantity);\n      await get().fetchCart(); // Refresh cart\n    } catch (error) {\n      toast.error(error.message || 'Failed to update quantity');\n    }\n  },\n  removeItem: async itemId => {\n    try {\n      await cartService.removeFromCart(itemId);\n      await get().fetchCart(); // Refresh cart\n      toast.success('Item removed from cart');\n    } catch (error) {\n      toast.error(error.message || 'Failed to remove item');\n    }\n  },\n  clearCart: async () => {\n    try {\n      await cartService.clearCart();\n      set({\n        items: [],\n        totalItems: 0,\n        totalAmount: 0\n      });\n      toast.success('Cart cleared');\n    } catch (error) {\n      toast.error(error.message || 'Failed to clear cart');\n    }\n  },\n  getCartSummary: async () => {\n    try {\n      const summary = await cartService.getCartSummary();\n      set({\n        totalItems: summary.total_items,\n        totalAmount: summary.total_amount\n      });\n    } catch (error) {\n      console.error('Failed to get cart summary:', error);\n    }\n  }\n}));","map":{"version":3,"names":["create","cartService","toast","useCartStore","set","get","items","isLoading","totalItems","totalAmount","fetchCart","getCart","reduce","sum","item","quantity","total_price","error","console","addToCart","productId","success","message","updateQuantity","itemId","removeItem","updateCartItem","removeFromCart","clearCart","getCartSummary","summary","total_items","total_amount"],"sources":["/Users/billscolinos/Documents/companyOS/frontend/src/stores/cartStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { cartService, CartItem } from '../services/cartService';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface CartState {\r\n  items: CartItem[];\r\n  isLoading: boolean;\r\n  totalItems: number;\r\n  totalAmount: number;\r\n  fetchCart: () => Promise<void>;\r\n  addToCart: (productId: number, quantity: number) => Promise<void>;\r\n  updateQuantity: (itemId: number, quantity: number) => Promise<void>;\r\n  removeItem: (itemId: number) => Promise<void>;\r\n  clearCart: () => Promise<void>;\r\n  getCartSummary: () => Promise<void>;\r\n}\r\n\r\nexport const useCartStore = create<CartState>((set, get) => ({\r\n  items: [],\r\n  isLoading: false,\r\n  totalItems: 0,\r\n  totalAmount: 0,\r\n\r\n  fetchCart: async () => {\r\n    set({ isLoading: true });\r\n    try {\r\n      const items = await cartService.getCart();\r\n      const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);\r\n      const totalAmount = items.reduce((sum, item) => sum + item.total_price, 0);\r\n      \r\n      set({ \r\n        items, \r\n        totalItems, \r\n        totalAmount, \r\n        isLoading: false \r\n      });\r\n    } catch (error: any) {\r\n      set({ isLoading: false });\r\n      console.error('Failed to fetch cart:', error);\r\n    }\r\n  },\r\n\r\n  addToCart: async (productId: number, quantity: number) => {\r\n    try {\r\n      await cartService.addToCart(productId, quantity);\r\n      await get().fetchCart(); // Refresh cart\r\n      toast.success('Added to cart!');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to add to cart');\r\n    }\r\n  },\r\n\r\n  updateQuantity: async (itemId: number, quantity: number) => {\r\n    try {\r\n      if (quantity <= 0) {\r\n        await get().removeItem(itemId);\r\n        return;\r\n      }\r\n      \r\n      await cartService.updateCartItem(itemId, quantity);\r\n      await get().fetchCart(); // Refresh cart\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to update quantity');\r\n    }\r\n  },\r\n\r\n  removeItem: async (itemId: number) => {\r\n    try {\r\n      await cartService.removeFromCart(itemId);\r\n      await get().fetchCart(); // Refresh cart\r\n      toast.success('Item removed from cart');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to remove item');\r\n    }\r\n  },\r\n\r\n  clearCart: async () => {\r\n    try {\r\n      await cartService.clearCart();\r\n      set({ items: [], totalItems: 0, totalAmount: 0 });\r\n      toast.success('Cart cleared');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to clear cart');\r\n    }\r\n  },\r\n\r\n  getCartSummary: async () => {\r\n    try {\r\n      const summary = await cartService.getCartSummary();\r\n      set({ \r\n        totalItems: summary.total_items,\r\n        totalAmount: summary.total_amount\r\n      });\r\n    } catch (error: any) {\r\n      console.error('Failed to get cart summary:', error);\r\n    }\r\n  },\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}